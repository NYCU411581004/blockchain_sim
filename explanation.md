# 區塊鏈模擬器說明

## 什麼是區塊鏈？

想像一個特殊的記帳本，這個記帳本有以下特點：
1. 每個人都有一份完整的副本
2. 新的交易會被打包成一個「區塊」
3. 每個區塊都與前一個區塊相連，形成一條「鏈」
4. 一旦記錄就不能被修改
5. 所有人都可以驗證交易的真實性

## 這個模擬器在做什麼？

這個程式模擬了一個簡單的區塊鏈系統，包含以下角色：
- **參與者**：可以進行交易的用戶
- **交易**：參與者之間的資金轉移
- **礦工**：負責將交易打包成區塊的人
- **區塊**：包含多筆交易的資料包

## 主要功能說明

### 1. 參與者系統
- 每個參與者都有：
  - 獨特的 IP 地址（就像網路上的門牌號碼）
  - 1000 元的初始資金
  - 自己的密鑰（用於簽名交易）

### 2. 交易系統
- 參與者可以：
  - 發送交易給其他參與者
  - 每次交易金額必須是正整數
  - 不能發送超過自己餘額的金額
  - 每次交易後需要等待 1-16 秒才能進行下一筆交易

### 3. 挖礦系統
- 當交易池中有 5 筆以上的交易，或等待超過 60 秒時，就會觸發挖礦
- 系統會選擇 IP 地址最小的參與者作為礦工
- 礦工需要解決一個數學難題（找到特定的雜湊值）
- 成功後，新的區塊會被添加到區塊鏈中

### 4. 驗證系統
- 每筆交易都需要：
  - 發送者的簽名
  - 足夠的餘額
  - 接收者的確認
- 每個區塊都需要：
  - 正確的雜湊值
  - 與前一個區塊的正確連結
  - 所有交易的驗證

## 技術細節解釋

### 1. 檔案結構
```
blockchain_sim/
├── blockchain_sim.py    # 主程式
├── requirements.txt     # 需要的程式套件清單
├── Dockerfile          # Docker 環境設定
├── .dockerignore       # Docker 忽略的檔案
└── README.md           # 使用說明
```

### 2. 重要指令解釋
```bash
# 建立 Docker 映像（就像建立一個虛擬的電腦環境）
docker build -t blockchain-sim .

# 運行程式（啟動虛擬環境並執行程式）
docker run blockchain-sim

# 啟用除錯模式（顯示更多執行細節）
docker run blockchain-sim --debug

# 設定參與者數量
docker run blockchain-sim --parties 3
```

### 3. 安全機制
- 使用 RSA 加密進行交易簽名
- 每個區塊都有唯一的雜湊值
- 區塊之間通過雜湊值相連，確保資料完整性
- 交易需要多重驗證才能被接受

## 實際運作流程

1. **初始化**：
   - 創建指定數量的參與者
   - 每個參與者獲得初始資金
   - 建立創世區塊

2. **交易階段**：
   - 隨機選擇參與者進行交易
   - 驗證交易的有效性
   - 將有效交易加入交易池

3. **挖礦階段**：
   - 選擇礦工
   - 打包交易成新區塊
   - 進行挖礦運算
   - 驗證並添加新區塊

4. **驗證階段**：
   - 定期檢查整個區塊鏈的有效性
   - 確保所有交易和區塊都是正確的

## 使用情境

這個模擬器可以用於：
- 學習區塊鏈的基本概念
- 理解加密貨幣的運作原理
- 研究區塊鏈的安全性機制
- 測試不同的交易模式

## 注意事項

1. 這是一個教學用的模擬器，不適合用於實際的加密貨幣交易
2. 模擬器中的難度設定較低，實際的區塊鏈系統會更複雜
3. 需要足夠的電腦資源才能運行
4. 第一次運行可能需要較長時間下載必要的程式 